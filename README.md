# Instdp üá∫üá¶
## –ü—Ä–æ—Å—Ç–∏–π –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è _–Ω–µ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π_ —Ñ—Ä–∞—î–º–≤–æ—Ä–∫ –¥–ª—è instagram
### Disclaimer –∞–±–æ –í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ  
–†–æ–∑—Ä–æ–±–Ω–∏–∫ –¥–∞–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è 
–Ω–µ –Ω–µ—Å–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ –±—É–¥—å-—è–∫—ñ –ø—Ä–æ–±–ª–µ–º–∏, 
—â–æ –º–æ–∂—É—Ç—å –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ü—å–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç—É 
–¥–ª—è –≤–∞—à–∏—Ö –æ–±–ª—ñ–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ —Ç–∞ –¥–∞–Ω–∏—Ö. 
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü–µ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –Ω–∞ –≤–ª–∞—Å–Ω–∏–π —Ä–∏–∑–∏–∫ —ñ –æ–±—ñ–∑–Ω–∞–Ω—ñ—Å—Ç—å.
### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
–ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É pip  
```commandline
pip install git+https://github.com/Teri-anric/instdp.git
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è  
–ù–µ–æ–±—Ö—ñ–¥–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞ –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ 
[instagrapi](https://github.com/subzeroid/instagrapi)
—É–≤—ñ–π—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –π–æ–≥–æ –¥–µ—Å–ø–µ—á–µ—Ä—É
```python
from instagrapi import Client
from instdp import DirectDispatcher

username, password = os.environ.get('USER').split(maxsplit=1)

cl = Client()
# –∑–º—ñ–Ω—é—î–º–æ –ø—Ä–∏—Å—Ç—Ä—ñ–π —ñ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –º—ñ–Ω—ñ–∑—É–≤–∞–Ω–Ω—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
c.set_device({
    "app_version": "289.0.0.25.49",
    "android_version": 29,
    "android_release": "10",
    "dpi": "480dpi",
    "resolution": "1080x2031",
    "manufacturer": "HUAWEI",
    "device": "HWEML",
    "model": "EML-L29",
    "cpu": "kirin970",
    "version_code": "488780865",
})
c.set_user_agent("Instagram 289.0.0.25.49 Android (29/10; 480dpi; 1080x2031; HUAWEI; EML-L29; HWEML; kirin970; it_IT; 488780865)")
# set Ukraine 
c.set_locale("uk_UA")

c.login(username=username, password=password)

dp = DirectDispatcher(client=cl)
```

**!! –ó–º—ñ–Ω—é–π—Ç–µ —é–∑–µ—Ä –∞–≥–µ–Ω—Ç–∞ —ñ–Ω–∞–∫—à–µ —à–∞–Ω—Å–∏ –æ—Ç—Ä–∏–º–∞—Ç–∏ –±–∞–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ñ !!**

–¢–µ–ø–µ—Ä –∑–∞—î—Ä–µ—Å—Ç—Ä—É—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
```python
from instagrapi.types import DirectMessage

@dp.message()
def echo(msg: DirectMessage, dispatcher: DirectDispatcher):
    dispatcher.answer_message(msg, msg.text)
```
–¢–∞–∫–æ–∂ —î –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–º–∏–ª–æ–∫
```python
from instagrapi.types import DirectThread

@dp.exception_handler(Exception)
def show_error(e: Exception, thread: DirectThread):
    print('error from chat name: ', thread.thread_title)
    print('error:', e)
```
–í –æ–±—Ä–æ–±–Ω–∏–∫—É –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–∞–∫—ñ –∞—Ä–≥—É–º–µ–Ω—Ç–∏:
- cl –∞–±–æ client - –†–æ–±–æ—á–∏–π –∫–ª—ñ—î–Ω—Ç –∑ instagrapi
- dp –∞–±–æ dispatcher - –°–∞–º –æ–±—î–∫—Ç –¥–∏—Å–ø–µ—á–µ—Ä—É
- th –∞–±–æ thread - –ß–∞—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- message - –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ –¥–ª—è exception_handler)
- handler - –û–±—Ä–æ–±–Ω–∏–∫ –≤ —è–∫–æ–º—É —Å—Ç–∞–ª–æ—Å—è –ø–æ–º–∏–ª–∫–∞ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è exception_handler)

–¢–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –¥–æ–±–∞–≤–∏—Ç–∏ —Å–≤–æ—ó –∞—Ä–≥—É–º–µ–Ω—Ç–∏ —á–µ—Ä–µ–∑ –¥–∏—Å–ø–µ—á–µ—Ä:
```python
dp[key] = value
```

–õ–∏—à–∏–ª–æ—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è  
```python
dp.polling_direct()
```
